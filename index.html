<!DOCTYPE html>
<html>
  <head>
    <title>Litter</title>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="theme.css">
  </head>
  <body>
    
    <div id=header>
      <div class="logo" style='display:inline'><a href=""><img src="logo.png" /></a></div>
      <h1>LITTER</h1>
      <h2>_live twitter</h2>
    </div>
    
    <div id="nav"></div>
    
    <button>Button</button>
    <div id="tweets"></div>
    
    <div id="footer">
      <p id="company">Jon Sadka 2014</p>
    </div>

    <script>

      $(document).ready(function(){
        var $tweetStream = $('#tweets');
        $tweetStream.html('');

        var count = 0;
        
        var updating = function(person){
          //console.log(streams.users);
          var index = person.length - 1;

          while(count <= index){
            var tweet = person[count];
            var $tweet = $('<div></div>');  

            $tweet.text(' @' + tweet.user + ' : ' + tweet.message);
            
            var aSentence  = $tweet.html().split(' ');
            function LinkWord(iIndex, sHref) {
                aSentence[iIndex] = '<span class="' + sHref + '">' + aSentence[iIndex] + '</span>';
                $tweet.html(aSentence.join(' '));
            }
            LinkWord(1, tweet.user); //should take to username page
              
            //$tweet.addClass(tweet.user);
            //$tweet.attr('id', 'messages');
            $tweet.hide().prependTo($tweetStream).fadeIn(700);
    
            count += 1;
          }
        }

        var everyone = setInterval(function(){updating(streams.home)},500);

        $(document).on('click', '#tweets', function(){
          clearInterval(everyone);
          console.log($(this).children().className);
          count = streams.users.mracus.length;

          var el = document.getElementById('tweets');
          while ( el.hasChildNodes() ){
            el.removeChild( el.lastChild );
          } 

          var person = streams.users.mracus;  //possibly change to this?

          for (var i=0; i<person.length; i++){
            var $tweet = $('<div></div>');
            var tweet = person[i];
            $tweet.text(' @' + tweet.user + ' : ' + tweet.message);
            $tweet.prependTo($tweetStream)
          }

          everyone = setInterval(function(){updating(streams.users.mracus)},500);
        });


      });

    </script>
  </body>
</html>